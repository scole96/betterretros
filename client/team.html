

<template name="teamManagement">
  {{>newTeam}}
  {{#with currentTeam}}
    {{>teamNav}}

    <div class="row">
      <div class="span12">
        <h3><a href="#" id="teamName" class="editable" data-type="text" data-pk="{{_id}}">{{name}}</a></h3>
      </div>    
    </div>
    <div class="row">
      <div class="span12">
        <h4>Team Lead</h4>
        {{getUserName leader}} - {{getEmailById leader}}
      </div>
    </div>
    <div class="row">
      <div class="span6">
        <h4>Current Members:</h4>
        <ul>
          {{#each teamMembers}}
            <li>{{profile.name}} - {{email this}}
              {{#if isTeamLeader ../_id}}
                {{#unless isCurrentUser _id}}
                  <i class="icon-trash" data-pk="{{_id}}"></i>
                {{/unless}}
              {{/if}}
            </li>
          {{/each}}
        </ul>
      </div>
      <div class="span6">
        <h4>Open Invitations:</h4>
          <ul>
            {{#each invites}}
              <li>{{this}}
                {{#if isTeamLeader ../_id}}
                  <i class="icon-trash" data-pk="{{_id}}"></i>
                {{/if}}
              </li>
            {{/each}}
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="span12">
        <h4>Invite someone</h4>
        <form id="addMember">
          <input type="text" id="newMember"  class="input-xlarge"/>
        </form>
      </div>
    </div>
  {{/with}}
</template>

<template name="teamNav">
  <div class="navbar">
    <div class="navbar-inner">
      <a class="brand">My Teams</a>
      <ul class="nav">
        {{#each teams}}
          <li class="{{isActive _id ../_id}}"><a href="/team/{{_id}}" class="teamLink" data-id="{{_id}}">{{name}}</a></li>
        {{/each}}
        <li><a href="#newTeamModal" data-toggle="modal">+ New Team </li>
      </ul>
    </div>
  </div>
</template>

<template name="newTeam">
  <div id="newTeamModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="new-team-modal-label" aria-hidden="true">
    <div class="modal-header">
      <h3>New Team</h3>
    </div>    
    <form id="newTeamForm">
      <div class="modal-body">
        <input type="text" id="newTeamName"  class="input-xlarge" placeholder="Name" required/>
      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" aria-hidden="true">Cancel</a>
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </form>
  </div>
</template>

<template name="admin">
  Nothing here yet
</template>